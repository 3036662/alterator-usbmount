<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  </head>

    <h2>USBMount</h2>

    <p>Модуль позволяет ограничить доступ к файловой системе USB-устройства по UID/GID.
    В модуле также предусмотрена возможность просмотра журнала
    событий подключения/отключения USB-устройств.
    </p>

    <p>Особенности работы модуля:
      <ul>
        <li>если для устройства не создано правило, то служба не вмешивается
          в логику монтирования USB-устройства;</li>
        <li>если для устройства создано правило, то служба монтирует блочные устройства
        на назначенном USB-устройстве в каталог /media/alt-usb-mount/$user_$group;</li>
        <li>служба назначает ACL для указанного пользователя и группы на каталог,
          в котором будет создана точка монтирования блочного устройства;</li>
        <li>в правилах можно указать только существующего локального пользователя
          и пользовательскую группу;</li>
        <li>доступ к USB-устройству назначенному пользователю и группе предоставляется полностью (rw);</li>
        <li>любой пользователь может отмонтировать устройство через стандартные средства ОС;</li>
        <li>служба не вмешивается в права самих файловых систем блочных устройств;</li>
        <li>рекомендуемая файловая система для переносных носителей exFAT.</li>
      </ul>
    </p>

    <h3>Запуск/останов службы</h3>

    <p>В модуле отображается текущее состояние службы USBMount (altusbd).</p>

    <p>Для включения контроля за устройствами необходимо передвинуть переключатель
    <strong>Служба USBMount остановлена</strong> и нажать кнопку <strong>Сохранить</strong>
    (служба USBMount будет запущена и добавлена в автозагрузку).</p>

    <p>Если служба USBMount запущена, в таблице <strong>Список устройств</strong>
        будет отображён список текущих подключённых устройств.</p>

    <p>В столбце <strong>Статус</strong> таблицы <strong>Список устройств</strong>
        отображается текущее состояние USB-устройства («free» — владелец для устройства
        не назначен, «owned» — устройству назначен владелец).</p>

    <p>Кнопка <strong>Обновить список блочных устройств</strong> позволяет
        обновить список подключённых устройств.</p>

    <h3>Добавление/удаление правил</h3>

    <p>Назначение прав для подключенного блочного устройства:</p>
    <ol>
      <li>Выделить строку с нужным устройством в таблице <strong>Список устройств</strong>
        и нажать кнопку <strong>Назначить владельца</strong>
        (или дважды щелкнуть мышью по строке с устройством).</li>
      <li>Правило будет добавлено в таблицу <strong>Список владельцев</strong>.</li>
      <li>В столбце <strong>Пользователь</strong> выбрать пользователя,
        в столбце <strong>Группа</strong> — группу владельца блочного устройства.</li>
      <li>Нажать кнопку <strong>Сохранить</strong>. Статус устройства
        в таблице <strong>Список устройств</strong> изменится на «owned».</li>
    </ol>

    <p>Назначение прав для произвольного блочного устройства:</p>
    <ol>
      <li>Нажать кнопку <strong>Добавить</strong>, расположенную под таблицей
      <strong>Список владельцев</strong>. В таблицу будет добавлена пустая строка.</li>
      <li>В соответствующих столбцах указать <strong>VID</strong>,
        <strong>PID</strong> и <strong>Серийный номер</strong> устройства.</li>
      <li>В столбце <strong>Пользователь</strong> выбрать пользователя,
        в столбце <strong>Группа</strong> — группу владельца блочного устройства.</li>
      <li>Нажать кнопку <strong>Сохранить</strong>.</li>
    </ol>

    <p><strong>Примечание:</strong> при создании/редактировании правила некорректные
    значения будут выделены красным цветом, корректные — зелёным.</p>

    <p>Редактирование правила:</p>
    <ol>
      <li>Дважды щелкнуть мышью по строке с правилом в таблице
      <strong>Список владельцев</strong> или выделить строку и нажать кнопку <strong>Изменить</strong>.</li>
      <li>Внести изменения.</li>
      <li>Нажать кнопку <strong>Сохранить</strong>.</li>
    </ol>

    <p>Удаление правила:</p>
    <ol>
      <li>Выделить строку(и) с правилом в таблице <strong>Список владельцев</strong>.</li>
      <li>Нажать кнопку <strong>Удалить</strong>.</li>
    </ol>

    <h3>Просмотр журнала аудита</h3>

    <p>Для просмотра журнала событий подключения/отключения USB-устройств
    необходимо нажать кнопку <strong>Журнал</strong>,
    расположенную в левом нижнем углу модуля. Будет раскрыт журнал аудита.</p>

    <p>Передвигаться по журналу к более старым или более новым записям можно
    с помощью кнопок <strong>Назад</strong> и <strong>Вперёд</strong>.
    Отфильтровать записи можно с помощью поля <strong>Фильтровать</strong>.</p>

    <p>Для того чтобы скрыть панель журнала, необходимо нажать кнопку
    <strong>Свернуть</strong>.</p>

  </body>
</html>
